<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Linux网络学习笔记-常用网络命令"><meta name="keywords" content="Linux"><meta name="author" content="Gard3nia"><meta name="copyright" content="Gard3nia"><title>Linux网络学习笔记-常用网络命令 | Gard3nia's Notebook</title><link rel="shortcut icon" href="/rea.jpg"><link rel="stylesheet" href="/css/index.css?version=1.5.6"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.5.6"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#前言"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Linux中常用的网络命令"><span class="toc-number">2.</span> <span class="toc-text">Linux中常用的网络命令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#设置网络参数的命令"><span class="toc-number">2.1.</span> <span class="toc-text">设置网络参数的命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ifconfig"><span class="toc-number">2.1.1.</span> <span class="toc-text">ifconfig</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ifup，ifdown"><span class="toc-number">2.1.2.</span> <span class="toc-text">ifup，ifdown</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#route"><span class="toc-number">2.1.3.</span> <span class="toc-text">route</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ip"><span class="toc-number">2.1.4.</span> <span class="toc-text">ip</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-关于接口设备的相关设置：ip-link"><span class="toc-number">2.1.4.1.</span> <span class="toc-text">1.关于接口设备的相关设置：ip link</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-关于额外IP的相关设定：ip-address"><span class="toc-number">2.1.4.2.</span> <span class="toc-text">2.关于额外IP的相关设定：ip address</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-关于路由的相关设定：ip-route"><span class="toc-number">2.1.4.3.</span> <span class="toc-text">3.关于路由的相关设定：ip route</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#iwlist-iwconfig"><span class="toc-number">2.1.5.</span> <span class="toc-text">iwlist,iwconfig</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dhclient"><span class="toc-number">2.1.6.</span> <span class="toc-text">dhclient</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#网络排错和查看命令"><span class="toc-number">2.2.</span> <span class="toc-text">网络排错和查看命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ping"><span class="toc-number">2.2.1.</span> <span class="toc-text">ping</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#traceroute"><span class="toc-number">2.2.2.</span> <span class="toc-text">traceroute</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#netstat"><span class="toc-number">2.2.3.</span> <span class="toc-text">netstat</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#检测主机名和IP的对应"><span class="toc-number">2.3.</span> <span class="toc-text">检测主机名和IP的对应</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#host"><span class="toc-number">2.3.1.</span> <span class="toc-text">host</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nslookup"><span class="toc-number">2.3.2.</span> <span class="toc-text">nslookup</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#远程连接命令和即时通信软件"><span class="toc-number">2.4.</span> <span class="toc-text">远程连接命令和即时通信软件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#telnet"><span class="toc-number">2.4.1.</span> <span class="toc-text">telnet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ftp"><span class="toc-number">2.4.2.</span> <span class="toc-text">ftp</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#文字接口网页浏览"><span class="toc-number">2.5.</span> <span class="toc-text">文字接口网页浏览</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#links"><span class="toc-number">2.5.1.</span> <span class="toc-text">links</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#wget"><span class="toc-number">2.5.2.</span> <span class="toc-text">wget</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据包捕获功能"><span class="toc-number">2.6.</span> <span class="toc-text">数据包捕获功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#tcpdump"><span class="toc-number">2.6.1.</span> <span class="toc-text">tcpdump</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nc–netcat"><span class="toc-number">2.6.2.</span> <span class="toc-text">nc–netcat</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Refer"><span class="toc-number">3.</span> <span class="toc-text">Refer</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">Gard3nia</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">22</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">18</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">11</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">friendlinks</div><a class="author-info-links__name text-center" href="https://skysec.top">一叶飘零学长</a><a class="author-info-links__name text-center" href="https://0verwatch.top/">0verwatch</a><a class="author-info-links__name text-center" href="http://chaosec.top/">瑞雪师傅</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://s2.ax1x.com/2019/05/26/VE5mHf.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Gard3nia's Notebook</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">主页</a><a class="site-page" href="/archives">时间轴</a><a class="site-page" href="/tags">标签</a><a class="site-page" href="/categories">归档</a><a class="site-page" href="/about">简介</a></span></div><div id="post-info"><div id="post-title">Linux网络学习笔记-常用网络命令</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-11-22</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Linux网络/">Linux网络</a><div class="post-meta-wordcount"><span>Word count: </span><span class="word-count">3.5k</span><span class="post-meta__separator">|</span><span>Reading time: 13 min</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>基础学习基本结束，那就需要在服务器上实战了。<a id="more"></a></p>
<h1 id="Linux中常用的网络命令"><a href="#Linux中常用的网络命令" class="headerlink" title="Linux中常用的网络命令"></a>Linux中常用的网络命令</h1><h2 id="设置网络参数的命令"><a href="#设置网络参数的命令" class="headerlink" title="设置网络参数的命令"></a>设置网络参数的命令</h2><h3 id="ifconfig"><a href="#ifconfig" class="headerlink" title="ifconfig"></a>ifconfig</h3><p>主要是可以手动启动、查看、修改网络接口的相关参数，可以修改的参数很多，语法如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ifconfig &#123;interface&#125; &#123;up|down&#125;    查看和启动接口</span><br><span class="line">ifconfig interface &#123;options&#125;      设置和修改接口</span><br><span class="line"></span><br><span class="line">interface：网卡接口的名称例如eth0，ppp0</span><br><span class="line">options：</span><br><span class="line">	up，down：启动和关闭该网络接口</span><br><span class="line">	mtu：设置不同的mtu数值</span><br><span class="line">	netmask：子网掩码</span><br><span class="line">	broadcast：广播地址</span><br></pre></td></tr></table></figure>
<p>实际的CentOS直接执行ifconfig命令以后</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.4.136  netmask 255.255.255.0  broadcast 192.168.4.255</span><br><span class="line">        inet6 fe80::225a:5b28:9fb5:7177  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 00:0c:29:72:3c:88  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 111939  bytes 105696848 (100.8 MiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 36890  bytes 5589961 (5.3 MiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></pre></td></tr></table></figure>
<ul>
<li>ens33表示网卡</li>
<li>mtu表示最大传输单元</li>
<li>inet表示ip地址，inet6表示IPV6下的地址</li>
<li>broadcast表示广播地址</li>
<li>netmask表示子网掩码</li>
<li>ether后面的是MAC地址</li>
<li>RX表示数据包接收情况</li>
<li>TX表示数据包发送情况</li>
<li>txqueuelen表示用来传输数据的缓冲区的存储长度</li>
</ul>
<p>其他的一些设置如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ifconfig ens33 129.168.x.x     暂时修改网络接口</span><br><span class="line">ifconfig netmask xxxx              </span><br><span class="line">ifconfig mtu xxxx</span><br><span class="line">ifconfig eth0:0 IP 在实体网卡上再仿真一个网络接口，在一张网卡上设置多个IP</span><br></pre></td></tr></table></figure>
<h3 id="ifup，ifdown"><a href="#ifup，ifdown" class="headerlink" title="ifup，ifdown"></a>ifup，ifdown</h3><p>实时地手动修改一些网络接口参数，可以利用<code>ifconfig</code>来实现，如果是要直接以配置文件，亦即是在 <code>/etc/sysconfig/network-scripts</code>里面的<code>ifcfg-ethx</code> 等文件的设置参数来启动的话，那就得要通过 ifdown 或 ifup 来实现了。</p>
<p>这两个程序其实是 script 而已，它会直接到 /etc/ sysconfig/network-scripts 目录下搜索对应的配置文件，例如 <code>ifup eth0</code>，它会找出 ifcfg-eth0 这个文件的内容，然后加以设置。</p>
<p>内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">TYPE=&quot;Ethernet&quot;</span><br><span class="line">PROXY_METHOD=&quot;none&quot;</span><br><span class="line">BROWSER_ONLY=&quot;no&quot;</span><br><span class="line">BOOTPROTO=&quot;dhcp&quot;</span><br><span class="line">DEFROUTE=&quot;yes&quot;</span><br><span class="line">IPV4_FAILURE_FATAL=&quot;no&quot;</span><br><span class="line">IPV6INIT=&quot;yes&quot;</span><br><span class="line">IPV6_AUTOCONF=&quot;yes&quot;</span><br><span class="line">IPV6_DEFROUTE=&quot;yes&quot;</span><br><span class="line">IPV6_FAILURE_FATAL=&quot;no&quot;</span><br><span class="line">IPV6_ADDR_GEN_MODE=&quot;stable-privacy&quot;</span><br><span class="line">NAME=&quot;ens33&quot;</span><br><span class="line">UUID=&quot;db8f19dd-80c8-4bcc-87b8-f3069dda76ce&quot;</span><br><span class="line">DEVICE=&quot;ens33&quot;</span><br><span class="line">ONBOOT=&quot;yes&quot;</span><br><span class="line">ZONE=public</span><br></pre></td></tr></table></figure>
<p>如果使用过ifconfig来设置过接口了，那么就不可以再使用ifdown和ifup了，使用完ifconfig以后，需要使用<code>ifconfig up/down</code>。</p>
<h3 id="route"><a href="#route" class="headerlink" title="route"></a>route</h3><p>两台主机之间一定要有路由才能互通TCP/IP协议，否则就无法连接。一般来说，只要有网络接口，该接口就会产生一个路由。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">route [-nee]</span><br><span class="line">route add [-net|-host] [网络或者主机] netmask [mask] [gw|dev]</span><br><span class="line">route del [-net|-host] [网络或者主机] netmask [mask] [gw|dev]</span><br><span class="line"></span><br><span class="line">-n：不使用主机名和通信协议，直接使用IP和端口号</span><br><span class="line">-ee：显示更详细的信息</span><br><span class="line">-net：后面接的路由为一个网络</span><br><span class="line">-host：后面接的为连接到单部主机的路由</span><br><span class="line">netmask：设置子网掩码</span><br><span class="line">gw：gateway的缩写，后面接IP</span><br><span class="line">dev：后面接网卡</span><br><span class="line"></span><br><span class="line">[gard3nia@localhost ~]$ route -n</span><br><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class="line">0.0.0.0         192.168.4.2     0.0.0.0         UG    100    0        0 ens33</span><br><span class="line">172.17.0.0      0.0.0.0         255.255.0.0     U     0      0        0 docker0</span><br><span class="line">192.168.4.0     0.0.0.0         255.255.255.0   U     100    0        0 ens33</span><br></pre></td></tr></table></figure>
<p>可以发现-n的效果就是将主机名换为IP地址表示。</p>
<ul>
<li>network和netmask：分别表示网络号和子网掩码</li>
<li>Gateway：表示该网络是通过哪个Gateway连接出去的。如果显示0.0.0.0就表示该路由是由本机传送。也就是可以通过局域网的MAC来发送出去。</li>
<li>Flags：标志位<ul>
<li>U：该路由是启动的</li>
<li>H：目标是一台主机而非网络</li>
<li>G：需要通过外部的主机来传递数据包</li>
<li>D：动态路由</li>
<li>M：路由已经被修改了</li>
<li>R：使用动态路由时，恢复路由信息的标志</li>
<li>！：这个路由将不会被接受</li>
</ul>
</li>
<li>Iface：这个路由传递数据包的接口</li>
</ul>
<h3 id="ip"><a href="#ip" class="headerlink" title="ip"></a>ip</h3><p>ip命令的功能非常多，综合了ifconfig和route两个命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ip [option] [动作] [命令]</span><br><span class="line"></span><br><span class="line">option：</span><br><span class="line">-s：显示出设备的统计数据，例如接受数据包的多少</span><br><span class="line"></span><br><span class="line">动作：</span><br><span class="line">link：与设备相关的设置，包括MTU\MAC等</span><br><span class="line">addr/address：关于额外的IP协议</span><br><span class="line">route：与路由相关的设置</span><br></pre></td></tr></table></figure>
<h4 id="1-关于接口设备的相关设置：ip-link"><a href="#1-关于接口设备的相关设置：ip-link" class="headerlink" title="1.关于接口设备的相关设置：ip link"></a>1.关于接口设备的相关设置：ip link</h4><p>基本上就是修改硬件信息。可以设置与设备有关的参数，包括MTU以及该网络接口的MAC等，也可以开启或者关闭某个网络接口。语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ip [-s] link show</span><br><span class="line">ip link set [device]</span><br><span class="line"></span><br><span class="line">选项和参数：</span><br><span class="line">show：仅仅显示出这个设备的相关属性</span><br><span class="line">set：可以开始设置项目，device指的是eth0等设备名称</span><br><span class="line"></span><br><span class="line">动作和参数：</span><br><span class="line">up|down：启动关闭接口</span><br><span class="line">address：如果可以更改MAC就用这个参数修改</span><br><span class="line">name：给予这个设备一个特殊的名字</span><br><span class="line">mtu：最大传输单元</span><br></pre></td></tr></table></figure>
<p>实际操作：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ip link show 显示本机所有接口信息</span><br><span class="line">ip -s link show eth0</span><br><span class="line">ip link set eth0 up/down</span><br><span class="line">ip link set eth0 mtu 1000</span><br><span class="line">ip link set eth0 name xx</span><br><span class="line">ip link set eth0 address xx：xx：xx：xx</span><br></pre></td></tr></table></figure>
<h4 id="2-关于额外IP的相关设定：ip-address"><a href="#2-关于额外IP的相关设定：ip-address" class="headerlink" title="2.关于额外IP的相关设定：ip address"></a>2.关于额外IP的相关设定：ip address</h4><p>这里的命令修改的是和IP层相关的参数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ip address show</span><br><span class="line">ip address [add|del] [IP参数] [dev] [参数]</span><br><span class="line"></span><br><span class="line">参数：</span><br><span class="line">broadcast：设置广播地址</span><br><span class="line">label：设备的别名，例如eth0:0</span><br><span class="line">scope：</span><br><span class="line">		global：允许来自所有来源的连接</span><br><span class="line">		site：仅仅支持IPv6</span><br><span class="line">		link：仅仅允许本设备自我连接</span><br><span class="line">		host：仅仅允许本主机内部的连接</span><br></pre></td></tr></table></figure>
<p>实际操作：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ip address add 192.168.50.50/24 broadcast + dev eth0 label eht0：xx</span><br><span class="line">ip address del xxxxxx/24 dev xxx</span><br></pre></td></tr></table></figure>
<h4 id="3-关于路由的相关设定：ip-route"><a href="#3-关于路由的相关设定：ip-route" class="headerlink" title="3.关于路由的相关设定：ip route"></a>3.关于路由的相关设定：ip route</h4><p>其实和route的功能差不多：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ip route [add|del] [IP/网络号] [via gateway] [dev]</span><br><span class="line"></span><br><span class="line">via：从哪个gateway出去</span><br><span class="line">dev：从哪个设备连出去（必要）</span><br><span class="line">mtu</span><br></pre></td></tr></table></figure>
<p>这个命令实在是太复杂…</p>
<h3 id="iwlist-iwconfig"><a href="#iwlist-iwconfig" class="headerlink" title="iwlist,iwconfig"></a>iwlist,iwconfig</h3><p>设置无线网卡相关数据</p>
<h3 id="dhclient"><a href="#dhclient" class="headerlink" title="dhclient"></a>dhclient</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dhclient eth0</span><br></pre></td></tr></table></figure>
<p>这样可以让网卡以DHCP协议去尝试获得IP。 </p>
<h2 id="网络排错和查看命令"><a href="#网络排错和查看命令" class="headerlink" title="网络排错和查看命令"></a>网络排错和查看命令</h2><h3 id="ping"><a href="#ping" class="headerlink" title="ping"></a>ping</h3><p>ping主要通过ICMP数据包来进行整个网络的状态报告，最重要的就是ICMP type0、8这两个类型，分别是要求回送和主动回送网络状态是否存在的特性。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ping [参数] IP</span><br><span class="line">-c 数值：后面接的是执行ping的次数</span><br><span class="line">-n    ：在输出数据时不进行IP与主机名的反查，直接使用IP输出</span><br><span class="line">-s 数值：发送出去的ICMP数据包的大小，默认为56bytes，不过可以放大</span><br><span class="line">-t 数值：TTL的数值，默认是255，每经过一个节点就会少1</span><br><span class="line">-W 数值：等待响应对方主机的秒数</span><br><span class="line">-M [do|dont]：检测MTU数值的大小</span><br><span class="line">	do：代表传送一个DF标志，让数据包不能重新拆包和打包</span><br><span class="line">	dont：代表不要传送DF标志，表示数据包可以在其他主机拆包和打包</span><br></pre></td></tr></table></figure>
<p>主要的响应：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[gard3nia@localhost ~]$ ping -c 6 192.168.4.1</span><br><span class="line">PING 192.168.4.1 (192.168.4.1) 56(84) bytes of data.</span><br><span class="line">64 bytes from 192.168.4.1: icmp_seq=1 ttl=128 time=0.414 ms</span><br><span class="line">64 bytes from 192.168.4.1: icmp_seq=2 ttl=128 time=0.487 ms</span><br><span class="line">64 bytes from 192.168.4.1: icmp_seq=3 ttl=128 time=0.535 ms</span><br><span class="line">64 bytes from 192.168.4.1: icmp_seq=4 ttl=128 time=0.392 ms</span><br><span class="line">64 bytes from 192.168.4.1: icmp_seq=5 ttl=128 time=0.663 ms</span><br><span class="line">64 bytes from 192.168.4.1: icmp_seq=6 ttl=128 time=0.400 ms</span><br><span class="line"></span><br><span class="line">--- 192.168.4.1 ping statistics ---</span><br><span class="line">6 packets transmitted, 6 received, 0% packet loss, time 5073ms</span><br><span class="line">rtt min/avg/max/mdev = 0.392/0.481/0.663/0.099 ms</span><br></pre></td></tr></table></figure>
<p>其中需要解释的几点：</p>
<blockquote>
<p>64 bytes：ICMP数据包的大小为64bytes</p>
<p>icmp_seq=1：ICMP检测的次数</p>
<p>ttl=128：和IP数据包内的TTL是相同的，每次经过一个带有MAC节点时，TTL就会减1，默认值为255</p>
<p>time：响应时间</p>
</blockquote>
<h3 id="traceroute"><a href="#traceroute" class="headerlink" title="traceroute"></a>traceroute</h3><p>主要用于量主机之间的各节点的分析：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">traceroute [参数] IP</span><br><span class="line">-n 使用IP来解析</span><br><span class="line">-U 使用UDP的port33434来进行检测</span><br><span class="line">-I 使用ICMP的方式来检测</span><br><span class="line">-T 使用TCP来进行检测</span><br><span class="line">-w 若对方主机在几秒内没有回应就申明不通..默认5s</span><br><span class="line">-p 端口号</span><br><span class="line">-i 设备，表示从哪个网卡接口连接到外部</span><br><span class="line">-g 路由，接的是gateway的IP地址</span><br></pre></td></tr></table></figure>
<p>基本上出现<code>***</code>的情况就是可能有防火墙设备</p>
<p>这个命令会针对欲连接的目标的所有的节点进行UDP的超时等待。如果返回星号就代表该节点可能设有某些防护措施，让我们发送的数据包信息被丢弃掉。因为我们是直接通过路由器来传递数据包，并没有去进入路由器去取得路由器的使用资源，所以某些路由器仅仅支持数据包传递，并不会接受来自客户端的各项检测。</p>
<h3 id="netstat"><a href="#netstat" class="headerlink" title="netstat"></a>netstat</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">netstat [-rn] 路由相关</span><br><span class="line">netstat [-antulpc] 与网络接口相关</span><br><span class="line">-r 和route功能一样</span><br><span class="line">-n 还是IP表示</span><br><span class="line">-a 列出所有的连接状态</span><br><span class="line">-t TCP</span><br><span class="line">-u UDP</span><br><span class="line">-l 正在listen的服务</span><br><span class="line">-p 列出PID</span><br><span class="line">-c 设置几秒后自动更新</span><br></pre></td></tr></table></figure>
<p>常用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">netstat -tulnp 显示出目前已经启动的网络服务</span><br><span class="line">netstat -atunp 查看本机上所有的网络连接状态</span><br></pre></td></tr></table></figure>
<p>具体的一些参数的含义：</p>
<ul>
<li>proto：该连接的数据包协议</li>
<li>local address：本地端的地址，可以是IP地址，也可以是完整的主机名。使用的格式是<code>IP:port</code>，只是格式分为IPv6和IPv4，其中使用的<code>:::22</code>就是针对IPv6的显示，事实上，就是相当于<code>0.0.0.0:22</code></li>
<li>foreign address：远程主机IP和port</li>
<li>stat：状态栏</li>
</ul>
<h2 id="检测主机名和IP的对应"><a href="#检测主机名和IP的对应" class="headerlink" title="检测主机名和IP的对应"></a>检测主机名和IP的对应</h2><h3 id="host"><a href="#host" class="headerlink" title="host"></a>host</h3><p>可以用来查询某个主机的IP</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[gard3nia@localhost ~]$ host gardenia30.top</span><br><span class="line">gardenia30.top has address 185.199.109.153</span><br></pre></td></tr></table></figure>
<h3 id="nslookup"><a href="#nslookup" class="headerlink" title="nslookup"></a>nslookup</h3><p>其实和host一样</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[gard3nia@localhost ~]$ nslookup gardenia30.top</span><br><span class="line">Server:         192.168.4.2</span><br><span class="line">Address:        192.168.4.2#53</span><br><span class="line"></span><br><span class="line">Non-authoritative answer:</span><br><span class="line">Name:   gardenia30.top</span><br><span class="line">Address: 185.199.109.153</span><br></pre></td></tr></table></figure>
<h2 id="远程连接命令和即时通信软件"><a href="#远程连接命令和即时通信软件" class="headerlink" title="远程连接命令和即时通信软件"></a>远程连接命令和即时通信软件</h2><h3 id="telnet"><a href="#telnet" class="headerlink" title="telnet"></a>telnet</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">telnet IP port</span><br></pre></td></tr></table></figure>
<p>可以使用这个命令来测试本地的端口的开启情况</p>
<h3 id="ftp"><a href="#ftp" class="headerlink" title="ftp"></a>ftp</h3><p>具体以后会写，先了解一下命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ftp ip port</span><br><span class="line"></span><br><span class="line">help </span><br><span class="line">dir</span><br><span class="line">cd</span><br><span class="line">get     下载单一文件</span><br><span class="line">mget    下载多个文件</span><br><span class="line">put     上传文件</span><br><span class="line">delete  删除文件</span><br><span class="line">mkdir</span><br><span class="line">lcd /home  切换到本地主机的/home</span><br><span class="line">passive   启动/关闭passive模式</span><br><span class="line">bye</span><br></pre></td></tr></table></figure>
<h2 id="文字接口网页浏览"><a href="#文字接口网页浏览" class="headerlink" title="文字接口网页浏览"></a>文字接口网页浏览</h2><h3 id="links"><a href="#links" class="headerlink" title="links"></a>links</h3><p>称为文字浏览器，常常被用于浏览以HTML语法写成的文件数据。</p>
<h3 id="wget"><a href="#wget" class="headerlink" title="wget"></a>wget</h3><p>常常被用于下载数据，只需要提供数据的地址即可：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget url</span><br></pre></td></tr></table></figure>
<h2 id="数据包捕获功能"><a href="#数据包捕获功能" class="headerlink" title="数据包捕获功能"></a>数据包捕获功能</h2><h3 id="tcpdump"><a href="#tcpdump" class="headerlink" title="tcpdump"></a>tcpdump</h3><p>常常用于数据监听的软件，必须要root身份才能使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">tcpdump [-AennqX] [-i 接口] [-w 存储文件名] [-c 次数] </span><br><span class="line">        [-r 文件] [数据包格式]</span><br><span class="line">-A：数据包的格式以ASCII显示</span><br><span class="line">-e：使用数据链路层的MAC数据包显示</span><br><span class="line">-nn：直接以IP和port显示，而非主机名和服务名称</span><br><span class="line">-q：精简列出数据包信息</span><br><span class="line">-X：列出hex以及ASCII的值</span><br><span class="line">-i：后面接需要监听的网卡接口</span><br><span class="line">-w：存取监听的数据包时使用，后面接文件名</span><br><span class="line">-r：从后面接的文件将数据包数据读出来</span><br><span class="line">-c：监听的数据包数目</span><br><span class="line"></span><br><span class="line">简化输出结果的方法：</span><br><span class="line">&apos;host xxx&apos;：针对单台主机</span><br><span class="line">&apos;net 192.168&apos;：针对某个网络</span><br><span class="line">&apos;src host 127.0.0.1&apos;     &apos;dst net 192.168&apos;：针对目标和来源</span><br><span class="line">&apos;tcp port 21&apos;：针对端口</span><br></pre></td></tr></table></figure>
<p>常用方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump -i ens33 -nn port xx &apos;限定条件&apos;</span><br></pre></td></tr></table></figure>
<p>从客户端访问目标主机的80端口，以下为在目标主机上抓取的80端口的数据包，很明显看出了建立TCP三次握手的过程：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[gard3nia@localhost ~]$ sudo tcpdump -i ens33 -nn port 80</span><br><span class="line">[sudo] password for gard3nia:</span><br><span class="line">tcpdump: verbose output suppressed, use -v or -vv for full protocol decode</span><br><span class="line">listening on ens33, link-type EN10MB (Ethernet), capture size 262144 bytes</span><br><span class="line">07:00:06.412774 IP 192.168.4.1.34680 &gt; 192.168.4.136.80: Flags [S], seq 3106410145, win 64240, options [mss 1460,nop,wscale 8,nop,nop,sackOK], length 0</span><br><span class="line">07:00:06.412906 IP 192.168.4.136.80 &gt; 192.168.4.1.34680: Flags [S.], seq 1492200684, ack 3106410146, win 29200, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 0</span><br><span class="line">07:00:06.413275 IP 192.168.4.1.34680 &gt; 192.168.4.136.80: Flags [.], ack 1, win 4106, length 0</span><br><span class="line">....省略</span><br></pre></td></tr></table></figure>
<h3 id="nc–netcat"><a href="#nc–netcat" class="headerlink" title="nc–netcat"></a>nc–netcat</h3><p>网络命令里的<strong>瑞士军刀</strong>，这个命令非常重要，在进行内网探测，嗅探还有反弹shell等等操作中都是非常实用的，甚至还可以用来传文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">nc [参数] IP port</span><br><span class="line">-g&lt;网关&gt;：设置路由器跃程通信网关，最多设置8个；</span><br><span class="line">-G&lt;指向器数目&gt;：设置来源路由指向器，其数值为4的倍数；</span><br><span class="line">-h：在线帮助；</span><br><span class="line">-i&lt;延迟秒数&gt;：设置时间间隔，以便传送信息及扫描通信端口；</span><br><span class="line">-l：使用监听模式，监控传入的资料；</span><br><span class="line">-n：直接使用ip地址，而不通过域名服务器；</span><br><span class="line">-o&lt;输出文件&gt;：指定文件名称，把往来传输的数据以16进制字码倾倒成该文件保存；</span><br><span class="line">-p&lt;通信端口&gt;：设置本地主机使用的通信端口；</span><br><span class="line">-r：指定源端口和目的端口都进行随机的选择；</span><br><span class="line">-s&lt;来源位址&gt;：设置本地主机送出数据包的IP地址；</span><br><span class="line">-t: 使用TELNET交互方式</span><br><span class="line">-u：使用UDP传输协议；</span><br><span class="line">-v：显示指令执行过程；</span><br><span class="line">-w&lt;超时秒数&gt;：设置等待连线的时间；</span><br><span class="line">-z：使用0输入/输出模式，只在扫描通信端口时使用</span><br></pre></td></tr></table></figure>
<p>简单的端口扫描：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -zv ip port</span><br></pre></td></tr></table></figure>
<p>监听自己的一个端口：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -lvp port</span><br></pre></td></tr></table></figure>
<p>连接其他主机的端口：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -nv ip port</span><br></pre></td></tr></table></figure>
<h1 id="Refer"><a href="#Refer" class="headerlink" title="Refer"></a>Refer</h1><p>1.《鸟哥的Linux私房菜-服务器架设篇》</p>
<p>2.一个挺全面的netcat使用说明：<a href="https://www.jianshu.com/p/af6766e428ec" target="_blank" rel="noopener">https://www.jianshu.com/p/af6766e428ec</a></p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Gard3nia</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://gardenia30.top/2019/11/22/Linux网络学习笔记-常用网络命令/">https://gardenia30.top/2019/11/22/Linux网络学习笔记-常用网络命令/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a></div><nav id="pagination"><div class="next-post pull-right"><a href="/2019/11/20/Linux基础学习笔记-分析日志/"><span>Linux基础学习笔记-日志分析</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2018 - 2019 By Gard3nia</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">Just keep moving!</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.5.6"></script><script src="/js/fancybox.js?version=1.5.6"></script><script src="/js/sidebar.js?version=1.5.6"></script><script src="/js/copy.js?version=1.5.6"></script><script src="/js/fireworks.js?version=1.5.6"></script><script src="/js/transition.js?version=1.5.6"></script><script src="/js/scroll.js?version=1.5.6"></script><script src="/js/head.js?version=1.5.6"></script></body></html>